!function(d,f,g,h){XF.ListSorter=XF.Element.newHandler({options:{dragHandle:null,undraggable:".is-undraggable"},dragula:null,init:function(){this.dragula=dragula([this.$target[0]],{moves:XF.proxy(this,"isMoveable"),accepts:XF.proxy(this,"isValidTarget")})},isMoveable:function(a,c,e,b){c=this.options.dragHandle;b=this.options.undraggable;return c&&!d(e).closest(c).length||b&&d(a).closest(b).length?!1:!0},isValidTarget:function(a,c,e,b){for(a=b?d(b).prev():this.$target.children().last();a.length;){if(a.is(".js-blockDragafter"))return!1;
a=a.prev()}return!0}});XF.Element.register("list-sorter","XF.ListSorter")}(jQuery,window,document);
