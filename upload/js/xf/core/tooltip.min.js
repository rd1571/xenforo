var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,k,e){d instanceof String&&(d=String(d));for(var a=d.length,b=0;b<a;b++){var c=d[b];if(k.call(e,c,b,d))return{i:b,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,k,e){d!=Array.prototype&&d!=Object.prototype&&(d[k]=e.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,k,e,a){if(k){e=$jscomp.global;d=d.split(".");for(a=0;a<d.length-1;a++){var b=d[a];b in e||(e[b]={});e=e[b]}d=d[d.length-1];a=e[d];k=k(a);k!=a&&null!=k&&$jscomp.defineProperty(e,d,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,e){return $jscomp.findInternal(this,d,e).v}},"es6","es3");
!function(d,k,e){XF.TooltipElement=XF.create({options:{baseClass:"tooltip",extraClass:"tooltip--basic",html:!1,inViewport:!0,loadRequired:!1,loadParams:null,placement:"top"},content:null,$tooltip:null,shown:!1,shownFully:!1,placement:null,positioner:null,loadRequired:!1,loading:!1,contentApplied:!1,setupCallbacks:null,__construct:function(a,b,c){this.setupCallbacks=[];this.options=d.extend(!0,{},this.options,b);this.content=a;this.loadRequired=this.options.loadRequired;c&&this.setPositioner(c)},setPositioner:function(a){this.positioner=
a},setLoadRequired:function(a){this.loadRequired=a},addSetupCallback:function(a){this.$tooltip?a(this.$tooltip):this.setupCallbacks.push(a)},show:function(){if(!this.shown)if(this.shown=!0,this.loadRequired)this.loadContent();else{var a=this.getTooltip(),b=this;this.reposition();d(k).on("resize.tooltip-"+a.xfUniqueId(),XF.proxy(this,"reposition"));a.trigger("tooltip:shown").stop().css({visibility:"",display:"none"}).fadeIn("fast",function(){b.shownFully=!0})}},hide:function(){if(this.shown){this.shownFully=
this.shown=!1;var a=this.$tooltip;a&&(a.stop().fadeOut("fast").trigger("tooltip:hidden"),d(k).off("resize.tooltip-"+a.xfUniqueId()))}},toggle:function(){this.shown?this.hide():this.show()},destroy:function(){this.$tooltip&&this.$tooltip.remove()},isShown:function(){return this.shown},isShownFully:function(){return this.shown&&this.shownFully},requiresLoad:function(){return this.loadRequired},getPlacement:function(){return XF.rtlFlipKeyword(this.options.placement)},reposition:function(){var a=this.positioner;
if(!a)console.error("No tooltip positioner");else if(!this.loadRequired){var b=this.options.inViewport;if(a instanceof d){var c=a.dimensions(!0);a.closest(".overlay").length&&(b=!0)}else"undefined"!==typeof a[0]&&"undefined"!==typeof a[1]?c={top:a[1],right:a[0],bottom:a[1],left:a[0]}:"undefined"!==typeof a.right&&"undefined"!==typeof a.bottom?c=a:console.error("Positioner is not in correct format",a);c.width=c.right-c.left;c.height=c.bottom-c.top;a=this.getTooltip();var g=this.getPlacement(),n=this.options.baseClass,
e=g;if(b){var m=d(k);b=m.height();var f=m.width();var l=m.scrollTop();m=m.scrollLeft();var h;(h=XF.Element.getHandlers("sticky-header"))&&h[0].$target.hasClass(h[0].options.stickyClass)&&(l+=h[0].$target.outerHeight());f={top:l,left:m,right:m+f,bottom:l+b,width:f,height:b}}else f=d("body").dimensions();this.placement&&a.removeClass(n+"--"+this.placement);a.addClass(n+"--"+g).css({visibility:"hidden",display:"block",top:"",bottom:"",left:"",right:"","padding-left":"","padding-right":"","padding-top":"",
"padding-bottom":""});h=a.outerWidth();b=a.outerHeight();"top"==g&&c.top-b<f.top?g="bottom":"bottom"==g&&c.bottom+b>f.bottom?c.top-b>=f.top&&(g="top"):"left"==g&&c.left-h<f.left?g=c.right+h>f.right?c.top-b<f.top?"bottom":"top":"right":"right"==g&&c.right+h>f.right&&(g=c.left-h<f.left?c.top-b<f.top?"bottom":"top":"left");g!=e&&a.removeClass(n+"--"+e).addClass(n+"--"+g);e={top:"",right:"",bottom:"",left:""};switch(g){case "top":e.bottom=d(k).height()-c.top;e.left=c.left+c.width/2-h/2;break;case "bottom":e.top=
c.bottom;e.left=c.left+c.width/2-h/2;break;case "left":e.top=c.top+c.height/2-b/2;e.right=d(k).width()-c.left;break;default:e.top=c.top+c.height/2-b/2,e.left=c.right}a.css(e);l=a.dimensions(!0);b=c=0;n=a.find("."+n+"-arrow");if("left"==g||"right"==g)l.top<f.top?c=f.top-l.top:l.bottom>f.bottom&&(c=f.bottom-l.bottom),n.css({left:"",top:50-100*c/l.top+"%"});else{l.left<f.left?b=f.left-l.left:l.left+h>f.right&&(b=f.right-(l.left+h));f=parseInt(h/100*(50-100*b/h),0);var p=f+parseInt(n.css("margin-left")),
q=p+n.outerWidth();l=parseInt(a.css("padding-left"),10);m=parseInt(a.css("padding-right"),10);p<l?(h=l-p,a.css({"padding-left":Math.max(0,l-h),"padding-right":m+h})):q>h-m&&(h=q-(h-m),a.css({"padding-left":m+h,"padding-right":Math.max(0,m-h)}));n.css({top:"",left:f})}b?a.css("left",e.left+b):c&&a.css("top",e.top+c);this.placement=g;this.shown&&!this.loadRequired&&a.css("visibility","")}},attach:function(){this.getTooltip()},getTooltip:function(){if(!this.$tooltip){var a=this.getTemplate();a.appendTo("body");
this.$tooltip=a;this.loadRequired||this.applyTooltipContent()}return this.$tooltip},applyTooltipContent:function(){if(this.contentApplied||this.loadRequired)return!1;var a=this.getTooltip(),b=a.find("."+this.options.baseClass+"-content"),c=this.content;d.isFunction(c)&&(c=c());this.options.html?(b.html(c),b.find("img").on("load",XF.proxy(this,"reposition"))):b.text(c);b=this.setupCallbacks;for(c=0;c<b.length;c++)b[c](a);XF.activate(a);return this.contentApplied=!0},loadContent:function(){if(this.loadRequired&&
!this.loading){var a=this.content,b=this,c=function(a){b.content=a;b.loadRequired=!1;b.loading=!1;b.applyTooltipContent();b.shown&&(b.shown=!1,b.show())};d.isFunction(a)?(this.loading=!0,a(c,this.options.loadParams)):c("")}},getTemplate:function(){var a=this.options.baseClass;return d(d.parseHTML('<div class="'+a+(this.options.extraClass?" "+this.options.extraClass:"")+'" role="tooltip"><div class="'+a+'-arrow"></div><div class="'+a+'-content"></div></div>'))}});XF.TooltipTrigger=XF.create({options:{delayIn:200,
delayInLoading:800,delayOut:200,trigger:"hover focus",maintain:!1,clickHide:null,onShow:null,onHide:null},$target:null,tooltip:null,delayTimeout:null,delayTimeoutType:null,stopFocusBefore:null,clickTriggered:!1,$covers:null,__construct:function(a,b,c){this.options=d.extend(!0,{},this.options,c);this.$target=a;this.tooltip=b;"auto"==this.options.trigger&&(this.options.trigger="hover focus"+(a.is("span")?" touchclick":""));b.setPositioner(a);b.addSetupCallback(XF.proxy(this,"onTooltipSetup"));a.xfUniqueId();
XF.TooltipTrigger.cache[a.attr("id")]=this},init:function(){var a=this.$target,b=!1,c=!1,d=this,e=XF.supportsPointerEvents(),k=e?"pointerenter":"mouseenter";e=e?"pointerleave":"mouseleave";null===this.options.clickHide&&(this.options.clickHide=a.is("a"));for(var m=this.options.trigger.split(" "),f=0;f<m.length;f++)switch(m[f]){case "hover":a.on(k+".tooltip",XF.proxy(this,"mouseEnter")).on(e+".tooltip",XF.proxy(this,"leave"));break;case "focus":a.on({"focusin.tooltip":XF.proxy(this,"focusEnter"),"focusout.tooltip":XF.proxy(this,
"leave")});break;case "click":b=!0;a.onPointer("click.tooltip",XF.proxy(this,"click"));a.onPointer("auxclick.tooltip contextmenu.tooltip",function(){d.cancelShow();d.stopFocusBefore=Date.now()+2E3});break;case "touchclick":c=!0;a.onPointer("click.tooltip",function(a){XF.isEventTouchTriggered(a)&&d.click(a)});break;case "touchhold":c=!0,a.data("threshold",this.options.delayIn),a.onPointer({"touchstart.tooltip":function(b){a.data("tooltip:touching",!0)},"touchend.tooltip":function(b){setTimeout(function(){a.removeData("tooltip:touching")},
50)},"taphold.tooltip":function(b){a.data("tooltip:taphold",!0);XF.isEventTouchTriggered(b)&&d.click(b)},"contextmenu.tooltip":function(b){a.data("tooltip:touching")&&b.preventDefault()}})}b&&c&&console.error("Cannot have touchclick and click triggers");if(!b&&this.options.clickHide)a.onPointer("click.tooltip auxclick.tooltip contextmenu.tooltip",function(a){c&&XF.isEventTouchTriggered(a)||(d.hide(),d.stopFocusBefore=Date.now()+2E3)});a.on({"tooltip:show":XF.proxy(this,"show"),"tooltip:hide":XF.proxy(this,
"hide"),"tooltip:reposition":XF.proxy(this,"reposition")})},reposition:function(){this.tooltip.reposition()},click:function(a){0<a.button||a.ctrlKey||a.shiftKey||a.metaKey||a.altKey?this.cancelShow():this.tooltip.isShown()?this.tooltip.isShownFully()?this.hide():(a.preventDefault(),this.clickShow(a)):(a.preventDefault(),this.clickShow(a))},clickShow:function(a){this.clickTriggered=!0;var b=this;setTimeout(function(){var c=b.addCovers();if(XF.isEventTouchTriggered(a))c.addClass("is-active");else d(e).on("click.tooltip-"+
b.$target.xfUniqueId(),XF.proxy(b,"docClick"))},0);this.show()},addCovers:function(){this.$covers&&this.$covers.remove();var a=this.$target.dimensions(!0),b=[];b.push({top:0,height:a.top,left:0,right:0});b.push({top:a.top,height:a.height,left:0,width:a.left});b.push({top:a.top,height:a.height,left:a.right,right:0});b.push({top:a.bottom,height:d("html").height()-a.bottom,left:0,right:0});a=d();for(var c,g=0;g<b.length;g++)c=d('<div class="tooltipCover" />').css(b[g]),a=a.add(c);a.on("click",XF.proxy(this,
"hide"));this.tooltip.getTooltip().before(a);this.$covers=a;XF.setRelativeZIndex(a,this.$target);return a},docClick:function(a){var b=this.$covers;var c=a.pageX;var g=a.pageY,n=d(k);b&&(0==a.screenX&&0==a.screenY&&(a=d(a.target).dimensions(),c=a.left,g=a.top),b.addClass("is-active"),c=d(e.elementFromPoint(c-n.scrollLeft(),g-n.scrollTop())),b.removeClass("is-active"),c.is(b)&&this.hide())},mouseEnter:function(a){XF.isEventTouchTriggered(a)||this.enter()},focusEnter:function(a){100>Date.now()-XF.pageDisplayTime||
XF.isEventTouchTriggered(a)||(!this.stopFocusBefore||Date.now()>=this.stopFocusBefore)&&this.enter()},enter:function(){if(!this.isShown()||!this.clickTriggered){this.clickTriggered=!1;var a=this.tooltip.requiresLoad()?this.options.delayInLoading:this.options.delayIn;if(a){if("enter"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&!this.isShown()){this.delayTimeoutType="enter";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.show()},a)}}else this.show()}},
leave:function(){if(!this.clickTriggered){var a=this.options.delayOut;if(a){if("leave"!==this.delayTimeoutType&&this.resetDelayTimer(),!this.delayTimeoutType&&this.isShown()){this.delayTimeoutType="leave";var b=this;this.delayTimeout=setTimeout(function(){b.delayTimeoutType=null;b.hide()},a)}}else this.hide()}},show:function(){var a=this;d(k).off("focus.tooltip-"+this.$target.xfUniqueId()).on("focus.tooltip-"+this.$target.xfUniqueId(),function(b){a.stopFocusBefore=Date.now()+250});XF.setRelativeZIndex(this.tooltip.getTooltip(),
this.$target);if(this.options.onShow){var b=this.options.onShow;b(this,this.tooltip)}this.tooltip.show()},cancelShow:function(){"enter"===this.delayTimeoutType?this.resetDelayTimer():this.tooltip.isShownFully()||this.hide()},hide:function(){this.tooltip.hide();this.resetDelayTimer();this.clickTriggered=!1;this.$covers&&(this.$covers.remove(),this.$covers=null);d(e).off("click.tooltip-"+this.$target.xfUniqueId());if(this.options.onHide){var a=this.options.onHide;a(this,this.tooltip)}},toggle:function(){this.isShown()?
this.hide():this.show()},isShown:function(){return this.tooltip.isShown()},wasClickTriggered:function(){return this.clickTriggered},resetDelayTimer:function(){this.delayTimeoutType&&(clearTimeout(this.delayTimeout),this.delayTimeoutType=null)},addMaintainElement:function(a){if(!a.data("tooltip-maintain")){for(var b=this.options.trigger.split(" "),c=0;c<b.length;c++)switch(b[c]){case "hover":a.on("mouseenter.tooltip",XF.proxy(this,"enter"));a.on("mouseleave.tooltip",XF.proxy(this,"leave"));break;case "focus":a.on("focusin.tooltip",
XF.proxy(this,"enter")),a.on("focusout.tooltip",XF.proxy(this,"leave"))}a.data("tooltip-maintain",!0)}},removeMaintainElement:function(a){a.off(".tooltip");a.data("tooltip-maintain",!1)},onTooltipSetup:function(a){if(this.options.maintain){this.addMaintainElement(a);var b=this;a.on("menu:opened",function(a,d){b.addMaintainElement(d)});a.on("menu:closed",function(a,d){b.removeMaintainElement(d)})}}});XF.TooltipTrigger.cache={};XF.TooltipOptions={base:{baseClass:"tooltip",extraClass:"tooltip--basic",
html:!1,inViewport:!0,placement:"top",clickHide:null,delayIn:200,delayOut:200,maintain:!1,trigger:"hover focus"},tooltip:["baseClass","extraClass","html","placement"],trigger:["clickHide","delayIn","delayOut","maintain","trigger"],extract:function(a,b){for(var c={},d=0;d<a.length;d++)c[a[d]]=b[a[d]];return c},extractTooltip:function(a){return this.extract(this.tooltip,a)},extractTrigger:function(a){return this.extract(this.trigger,a)}};XF.Tooltip=XF.Element.newHandler({options:d.extend(!0,{},XF.TooltipOptions.base,
{content:null}),trigger:null,tooltip:null,init:function(){var a=this.getContent(),b=XF.TooltipOptions.extractTooltip(this.options),c=XF.TooltipOptions.extractTrigger(this.options);this.tooltip=new XF.TooltipElement(a,b);this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,c);this.trigger.init()},getContent:function(){if(this.options.content)return this.options.content;var a=this.$target,b=a.attr("data-original-title")||a.attr("title")||"";a.attr("data-original-title",b).removeAttr("title");
return b}});XF.ElementTooltip=XF.extend(XF.Tooltip,{__backup:{getContent:"_getContent",init:"_init"},options:d.extend({},XF.Tooltip.prototype.options,{element:null,showError:!0,noTouch:!0,shortcut:null}),$element:null,init:function(){this.options.shortcut&&this.setupShortcut(this.options.shortcut);if(!this.options.noTouch||!XF.Feature.has("touchevents")){var a=this.options.element,b=this.options.showError;if(a){var c=XF.findRelativeIf(a,this.$target);c.length?(this.$element=c,this.$target.removeAttr("title"),
this.options.html=!0,this._init()):b&&console.error("Element tooltip could not find "+a)}else b&&console.error("No element specified for the element tooltip")}},setupShortcut:function(a){"node-description"==a&&(this.options.element||(this.options.element="< .js-nodeMain | .js-nodeDescTooltip"),this.options.showError=!1,this.options.maintain=!0,this.options.placement="right",this.options.extraClass="tooltip--basic tooltip--description")},getContent:function(){return this.$element.clone().contents()}});
XF.PreviewTooltip=XF.Element.newHandler({options:{delay:600,previewUrl:null},trigger:null,tooltip:null,init:function(){this.options.previewUrl?(this.tooltip=new XF.TooltipElement(XF.proxy(this,"getContent"),{extraClass:"tooltip--preview",html:!0,loadRequired:!0}),this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay}),this.trigger.init()):console.error("No preview URL")},getContent:function(a){var b=this;XF.ajax("get",
this.options.previewUrl,{},function(c){b.loaded(c,a)},{skipDefault:!0,skipError:!0,global:!1})},loaded:function(a,b){a.html&&XF.setupHtmlInsert(a.html,function(a,d,e){b(a)})}});XF.MemberTooltipCache={};XF.MemberTooltip=XF.Element.newHandler({options:{delay:600},trigger:null,tooltip:null,userId:null,init:function(){this.userId=this.$target.data("user-id");this.tooltip=new XF.TooltipElement(XF.proxy(this,"getContent"),{extraClass:"tooltip--member",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,
this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:"hover focus click",onShow:XF.proxy(this,"onShow"),onHide:XF.proxy(this,"onHide")});this.trigger.init()},getContent:function(a){var b=XF.MemberTooltipCache[this.userId];if(b)b=d(d.parseHTML(b)),a(b);else{var c=this;b={skipDefault:!0,skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(b.global=!0);XF.ajax("get",this.$target.attr("href"),{tooltip:!0},function(b){c.loaded(b,a)},b)}},loaded:function(a,
b){if(a.html){var c=this.userId;XF.setupHtmlInsert(a.html,function(d,e,k){XF.MemberTooltipCache[c]=a.html.content;b(d)})}},onShow:function(){var a=XF.MemberTooltip.activeTooltip;a&&a!==this&&a.hide();XF.MemberTooltip.activeTooltip=this},onHide:function(){XF.MemberTooltip.activeTooltip===this&&(XF.MemberTooltip.activeTooltip=null)},show:function(){this.trigger.show()},hide:function(){this.trigger.hide()}});XF.MemberTooltip.activeTooltip=null;XF.ShareTooltip=XF.Element.newHandler({options:{delay:300},
trigger:null,tooltip:null,url:null,init:function(){this.url=this.$target.attr("href");this.tooltip=new XF.TooltipElement(XF.proxy(this,"getContent"),{extraClass:"tooltip--share",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.$target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:"hover focus click",onShow:XF.proxy(this,"onShow"),onHide:XF.proxy(this,"onHide")});this.trigger.init()},getContent:function(a){var b=this,c={skipDefault:!0,
skipError:!0,global:!1};this.trigger.wasClickTriggered()&&(c.global=!0);XF.ajax("get",this.$target.data("href"),{},function(c){b.loaded(c,a)},c)},loaded:function(a,b){a.html&&XF.setupHtmlInsert(a.html,function(a,d,e){b(a)})},onShow:function(){var a=XF.ShareTooltip.activeTooltip;a&&a!==this&&a.hide();XF.ShareTooltip.activeTooltip=this},onHide:function(){XF.ShareTooltip.activeTooltip===this&&(XF.ShareTooltip.activeTooltip=null)},show:function(){this.trigger.show()},hide:function(){this.trigger.hide()}});
XF.ShareTooltip.activeTooltip=null;XF.Element.register("element-tooltip","XF.ElementTooltip");XF.Element.register("member-tooltip","XF.MemberTooltip");XF.Element.register("preview-tooltip","XF.PreviewTooltip");XF.Element.register("share-tooltip","XF.ShareTooltip");XF.Element.register("tooltip","XF.Tooltip")}(jQuery,window,document);
