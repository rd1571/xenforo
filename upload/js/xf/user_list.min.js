var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var e=a.length,c=0;c<e;c++){var g=a[c];if(d.call(b,g,c,a))return{i:c,v:g}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,d,b,e){if(d){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in b||(b[c]={});b=b[c]}a=a[a.length-1];e=b[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");
!function(a,d,b,e){XF.RemoveLink=XF.Event.newHandler({eventNameSpace:"XFRemoveClick",options:{user:null,href:null},loading:!1,container:null,noResults:null,count:0,init:function(){this.options.href||(this.options.href=a(this.$target).attr("href"));if(null===this.options.user||null===this.options.href)return console.warn("Link found without userId or url defined. %o",this.$target),!1;this.container=a("#user_list_"+this.options.user);this.noResults=a(".js-userListEmpty");this.count=a(".user-link").length},
click:function(a){a.preventDefault();this.loading||this.remove()},remove:function(){this.loading=!0;var a=this;XF.ajax("post",this.options.href,{user_id:this.options.user},function(){a.container.remove();a.count--;1>a.count&&a.noResults.removeClass("u-hidden")},{skipDefault:!0}).always(function(){a.loading=!1})}});XF.AddForm=XF.Element.newHandler({options:{},form:null,userInput:null,noResults:null,init:function(){this.form=a(this.$target);this.form.on("ajax-submit:complete",XF.proxy(this,"formSubmit"));
this.userInput=this.form.find(".users");this.noResults=this.form.find(".js-userListEmpty")},formSubmit:function(c,b){c.preventDefault();if("error"!==b.status){c=b.userIds;var d=null,e=null,f=0;this.userInput.val("").autofocus();for(f=0;f<c.length;f++)0==this.form.find("#user_list_"+c[f]).length&&(e=a(b.users[c[f]]),d?XF.setupHtmlInsert(e,function(a,b,c){a.appendTo(".user-list")}):XF.setupHtmlInsert(e,function(a,b,c){a.prependTo(".user-list")}),0<a(".user-link").length&&this.noResults.addClass("u-hidden")),
d="#user_list_"+c[f]}}});XF.Event.register("click","remove-user","XF.RemoveLink");XF.Element.register("add-user","XF.AddForm")}(jQuery,window,document);
