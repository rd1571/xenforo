var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,e,c){a instanceof String&&(a=String(a));for(var d=a.length,b=0;b<d;b++){var f=a[b];if(e.call(c,f,b,a))return{i:b,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,e,c,d){if(e){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var b=a[d];b in c||(c[b]={});c=c[b]}a=a[a.length-1];d=c[a];e=e(d);e!=d&&null!=e&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:e})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
!function(a,e,c,d){XF.Stats=XF.Element.newHandler({options:{data:"| .js-statsData",seriesLabels:"| .js-statsSeriesLabels",legend:"| .js-statsLegend",chart:"| .js-statsChart",maxTicks:9,lineSmooth:!1,showArea:!1,showPoint:!0,averages:!0},$chart:null,chart:null,seriesLabels:{},labelMap:{},tooltipEl:null,init:function(){this.$chart=XF.findRelativeIf(this.options.chart,this.$target);var b={},f=XF.findRelativeIf(this.options.data,this.$target),l={},g=XF.findRelativeIf(this.options.seriesLabels,this.$target);
try{b=a.parseJSON(f.first().html())||{}}catch(h){console.error("Stats data not valid: ",h);return}try{l=a.parseJSON(g.first().html())||{}}catch(h){console.error("Series labels not valid: ",h)}this.seriesLabels=l;b=this.setupChartData(b);f=this.setupChartOptions(b);l=this.setupChartResponsive(b,f);this.createChart(b,f,l)},setupChartData:function(b){var f=[],l={},g=null,c=0,e=this;console.log("setupChartData...");a.each(b,function(a,b){a=0;var k=e.options.averages?"averages":"values",d=k+".tips";k=
b[k];f.push(c);l[c]=b.label;if(null==g){g=[];for(var m in k)g.push({name:e.seriesLabels[m],data:[]})}for(var h in k)k.hasOwnProperty(h)&&(m={x:c,y:k[h]},b.hasOwnProperty(d)&&(m.tip=b[d][h]),g[a].data.push(m),a++);c++});this.labelMap=l;return{labels:f,series:g}},setupChartOptions:function(a){var b=a.labels,c=this;return{fullWidth:!0,lineSmooth:c.options.lineSmooth,showArea:c.options.showArea,showPoint:c.options.showPoint,axisY:{onlyInteger:!0,labelOffset:{x:0,y:6}},axisX:{type:Chartist.FixedScaleAxis,
ticks:this.getTicks(b,this.options.maxTicks),low:b[0],high:b.length?b[b.length-1]:0,labelOffset:{x:0,y:4},labelInterpolationFnc:function(a,f){return a>=b[b.length-1]?"\u00a0":c.labelMap[a]}}}},getTicks:function(a,c){var b=[];c=Math.ceil(a.length/c);for(var g=0;g<a.length;g++)0==g%c&&b.push(a[g]);return b},setupChartResponsive:function(a,c){return[["screen and (max-width: 800px)",{axisX:{ticks:this.getTicks(a.labels,Math.min(6,this.options.maxTicks))}}],["screen and (max-width: 500px)",{axisX:{ticks:this.getTicks(a.labels,
Math.min(3,this.options.maxTicks))}}]]},createChart:function(b,c,d){this.chart=new Chartist.Line(this.$chart[0],b,c,d);var g=a("<span />");this.tooltipEl=new XF.TooltipElement(g,{html:!0});var h=this;this.$chart.on("mouseenter focusin",".ct-point",function(c){c=a(c.target);var k=c.closest(".ct-series"),e=k.index(),d=c.attr("ct:value").split(","),f=d[0];d=d[1]||0;b.series[e].data[f].hasOwnProperty("tip")?g.html(b.series[e].data[f].tip):g.text(k.attr("ct:series-name")+" - "+h.labelMap[f]+": "+d);h.tooltipEl.setPositioner(c);
h.tooltipEl.show()});this.$chart.on("mouseleave focusout",".ct-point",function(a){h.tooltipEl.hide()});var f=XF.findRelativeIf(this.options.legend,this.$target),l=this.$chart,n=this.chart;f.length&&setTimeout(function(){a.each(n.data.series,function(b,c){b=c.className||n.options.classNames.series+"-"+Chartist.alphaNumerate(b);var d=l.find("."+b).find(".ct-line, .ct-point").first();b=a("<li />");d.length&&(b.text(c.name),c=e.getComputedStyle(d[0]).getPropertyValue("stroke"),b.prepend(a("<i />").css("background",
c)),f.append(b))})},0)}});XF.Element.register("stats","XF.Stats")}(jQuery,window,document);
