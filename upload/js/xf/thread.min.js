!function(d,e,f,g){XF.ThreadEditForm=XF.Element.newHandler({options:{itemSelector:null},$item:null,$inlineEdit:null,init:function(){this.$item=d(this.options.itemSelector);this.$item.length&&(this.$target.on("ajax-submit:before",XF.proxy(this,"beforeSubmit")),this.$target.on("ajax-submit:response",XF.proxy(this,"afterSubmit")),this.$inlineEdit=d('<input type="hidden" name="_xfInlineEdit" value="1" />'))},beforeSubmit:function(){this.$target.append(this.$inlineEdit)},afterSubmit:function(b,a){if(!a.errors&&
!a.exception){b.preventDefault();a.message&&XF.flashMessage(a.message,3E3);var c=this;XF.setupHtmlInsert(a.html,function(a,b,d){c.$item.replaceWith(a);d()});XF.hideParentOverlay(this.$target)}}});XF.QuickThread=XF.Element.newHandler({options:{focusActivate:".js-titleInput",focusActivateTarget:".js-quickThreadFields",focusActivateHref:null,insertTarget:".js-threadList",replaceTarget:".js-emptyThreadList"},xfInserter:null,loading:!1,init:function(){var b=d(this.options.focusActivate);b.length&&(this.xfInserter=
new XF.Inserter(b,{href:this.options.focusActivateHref,replace:this.options.focusActivateTarget}),b.on("focus",XF.proxy(function(a){if(d(this.options.replace).is(":empty"))this.onEvent(a)},this.xfInserter)));this.$target.on("ajax-submit:response",XF.proxy(this,"afterSubmit")).on("reset",XF.proxy(this,"reset"))},afterSubmit:function(b,a){if(!this.loading)if(this.loading=!0,a.errors||a.exception)this.loading=!1;else{b.preventDefault();a.redirect&&XF.redirect(a.redirect);var c=this;XF.setupHtmlInsert(a.html,
function(a){XF.hideTooltips();a.hide();d(c.options.insertTarget)["asc"==c.options.direction?"append":"prepend"](a);d(c.options.replaceTarget).replaceWith(a);c.reset(null,function(){a.xfFadeDown();c.loading=!1})})}},reset:function(b,a){var c=d(this.options.focusActivateTarget);XF.hideTooltips();c.xfFadeUp(null,XF.proxy(function(){c.empty();b&&"reset"==b.type||this.$target.get(0).reset();"function"==typeof a&&a()},this))}});XF.Element.register("thread-edit-form","XF.ThreadEditForm");XF.Element.register("quick-thread",
"XF.QuickThread")}(jQuery,window,document);
