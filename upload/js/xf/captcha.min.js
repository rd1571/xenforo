var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,d){a instanceof String&&(a=String(a));for(var e=a.length,c=0;c<e;c++){var f=a[c];if(b.call(d,f,c,a))return{i:c,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){a!=Array.prototype&&a!=Object.prototype&&(a[b]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,b,d,e){if(b){d=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var c=a[e];c in d||(d[c]={});d=d[c]}a=a[a.length-1];e=d[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");
!function(a,b,d,e){XF.KeyCaptcha=XF.Element.newHandler({options:{user:null,session:null,sign:null,sign2:null},$form:null,$code:null,init:function(){this.$form=this.$target.closest("form");this.$form.xfUniqueId();this.$code=this.$form.find("input[name=keycaptcha_code]");this.$code.xfUniqueId();this.load();this.$target.closest("form").on("ajax-submit:error ajax-submit:always",XF.proxy(this,"reload"))},load:function(){b.s_s_c_onload?this.create():(b.s_s_c_user_id=this.options.user,b.s_s_c_session_id=
this.options.session,b.s_s_c_captcha_field_id=this.$code.attr("id"),b.s_s_c_submit_button_id="sbutton-#-r",b.s_s_c_web_server_sign=this.options.sign,b.s_s_c_web_server_sign2=this.options.sign2,d.s_s_c_element=this.$form[0],d.s_s_c_debugmode=1,a("#div_for_keycaptcha").length||a("body").append('<div id="div_for_keycaptcha" />'),a.ajax({url:"https://backs.keycaptcha.com/swfs/cap.js",dataType:"script",cache:!0,global:!1}))},create:function(){b.s_s_c_onload(this.$form.attr("id"),this.$code.attr("id"),
"sbutton-#-r")},reload:function(c){b.s_s_c_onload&&(a(c.target).is("form")||c.preventDefault(),this.load())}});XF.ReCaptcha=XF.Element.newHandler({options:{sitekey:null,invisible:null},$reCaptchaTarget:null,reCaptchaId:null,invisibleValidated:!1,reloading:!1,init:function(){if(this.options.sitekey){var c=this.$target.closest("form");if(this.options.invisible){var d=a("<div />"),e=this.$target.closest(".formRow");e.hide();e.after(d);this.$reCaptchaTarget=d;c.on("ajax-submit:before",XF.proxy(this,"beforeSubmit"))}else this.$reCaptchaTarget=
this.$target;c.on("ajax-submit:error ajax-submit:always",XF.proxy(this,"reload"));b.grecaptcha?this.create():(XF.ReCaptcha.Callbacks.push(XF.proxy(this,"create")),a.ajax({url:"https://www.google.com/recaptcha/api.js?onload=XFReCaptchaCallback&render=explicit",dataType:"script",cache:!0,global:!1}))}},create:function(){if(b.grecaptcha){var a={sitekey:this.options.sitekey};this.options.invisible&&(a.size="invisible",a.callback=XF.proxy(this,"complete"));this.reCaptchaId=grecaptcha.render(this.$reCaptchaTarget[0],
a)}},beforeSubmit:function(a,b){this.invisibleValidated||(a.preventDefault(),b.preventSubmit=!0,grecaptcha.execute())},complete:function(){this.invisibleValidated=!0;this.$target.closest("form").submit()},reload:function(){if(b.grecaptcha&&null!==this.reCaptchaId&&!this.reloading){this.reloading=!0;var a=this;setTimeout(function(){grecaptcha.reset(a.reCaptchaId);a.reloading=!1;a.invisibleValidated=!1},50)}}});XF.ReCaptcha.Callbacks=[];b.XFReCaptchaCallback=function(){for(var a=XF.ReCaptcha.Callbacks,
b=0;b<a.length;b++)a[b]()};XF.QaCaptcha=XF.Element.newHandler({options:{url:null},reloading:!1,init:function(){if(this.options.url)this.$target.closest("form").on("ajax-submit:error ajax-submit:always",XF.proxy(this,"reload"))},reload:function(){this.reloading||(this.reloading=!0,this.$target.fadeTo(XF.config.speed.fast,.5),XF.ajax("get",this.options.url,XF.proxy(this,"show")))},show:function(a){var b=this.$target,c=this;XF.setupHtmlInsert(a.html,function(a,d,e){a.hide();b.after(a);b.xfFadeUp(XF.config.speed.fast,
function(){a.xfFadeDown(XF.config.speed.fast);b.remove()});c.reloading=!1;e()})}});XF.SolveCaptcha=XF.Element.newHandler({options:{ckey:null,theme:"white"},instance:null,reloading:!1,init:function(){this.instance&&this.instance.remove();this.instance=this;this.options.ckey&&(this.$target.closest("form").on("ajax-submit:error ajax-submit:always",XF.proxy(this,"reload")),this.$target.siblings("noscript").remove(),this.load(),a(b).on("unload",XF.proxy(this,"remove")))},load:function(){if(b.ACPuzzle)this.create();
else{var c="https:"==b.location.protocol?"https://api-secure":"http://api";b.ACPuzzleOptions={onload:XF.proxy(this,"create")};a.ajax({url:c+".solvemedia.com/papi/challenge.ajax",dataType:"script",cache:!0,global:!1})}},create:function(){b.ACPuzzle.create(this.options.ckey,this.$target.attr("id"),{theme:this.options.theme||"white",lang:a("html").attr("lang").substr(0,2)||"en"})},reload:function(c){b.ACPuzzle&&!this.reloading&&(a(c.target).is("form")||c.preventDefault(),b.ACPuzzle.reload())},remove:function(){this.$target.empty().remove();
b.ACPuzzle&&b.ACPuzzle.destroy()}});XF.Element.register("key-captcha","XF.KeyCaptcha");XF.Element.register("re-captcha","XF.ReCaptcha");XF.Element.register("qa-captcha","XF.QaCaptcha");XF.Element.register("solve-captcha","XF.SolveCaptcha")}(jQuery,window,document);
