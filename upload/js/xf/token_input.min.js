var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,d,c){b instanceof String&&(b=String(b));for(var f=b.length,a=0;a<f;a++){var e=b[a];if(d.call(c,e,a,b))return{i:a,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,c){b!=Array.prototype&&b!=Object.prototype&&(b[d]=c.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,d,c,f){if(d){c=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var a=b[f];a in c||(c[a]={});c=c[a]}b=b[b.length-1];f=c[b];d=d(f);d!=f&&null!=d&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:d})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");
!function(b,d,c,f){XF.TokenInput=XF.Element.newHandler({options:{tokens:[","],minLength:2,maxLength:0,maxTokens:0,selectOnClose:!1,acUrl:"",listData:{}},$container:null,$selection:null,$hiddenInput:null,init:function(){var a=this.$target,e=this.options,c=a.clone().insertAfter(a).prop("type","hidden").removeAttr("data-xf-init").removeAttr("id"),d={tags:!0,width:"100%",containerCssClass:"input",language:XF.TokenInput.Phrases,minimumInputLength:e.minLength,maximumInputLength:e.maxLength,maximumSelectionLength:e.maxTokens,
selectOnClose:e.selectOnClose,disabled:a.prop("disabled"),placeholder:this.$target.attr("placeholder")};try{d.tokenSeparators=b.parseJSON(e.tokens)}catch(h){d.tokenSeparators=e.tokens}e.acUrl&&(d.ajax={delay:250,data:XF.proxy(this,"prepareAjax"),transport:XF.proxy(this,"getAjax"),processResults:XF.proxy(this,"processAjax")},d.escapeMarkup=function(a){return a},d.sorter=XF.proxy(this,"sortResults"),d.templateResult=XF.proxy(this,"prepareResults"),d.templateSelection=XF.proxy(this,"prepareSelection"));
if(e.listData){var f=[];b.each(e.listData,function(a,b){f.push({id:a,text:b})});d.data=f}a.remove();var g=b('<select name="tokens_select" multiple="multiple" class="js-tokenSelect"></select>').insertBefore(c).select2(d);c.val()&&(e=c.val().split(",").map(b.trim),b.each(e,function(a,e){a=g.find('option[value="'+e.replace('"','\\"')+'"]');a.length?a.prop("selected",!0):b("<option selected>").val(e).text(e).appendTo(g)}),g.trigger("change"));this.$hiddenInput=c;c=g.data("select2");this.$container=c.$container;
this.$selection=c.$selection;c.on("results:message",function(a){this.dropdown._resizeDropdown();this.dropdown._positionDropdown()});a.attr("autofocus")&&(g.select2("open"),c.$selection.addClass("is-focused"));a=g.closest(".overlay-container");if(a.length)a.on("overlay:hiding",function(){g.select2("close")});g.on("select2:unselecting",function(a){XF.MenuWatcher.preventDocClick()});g.on("select2:unselect",function(a){setTimeout(function(){XF.MenuWatcher.allowDocClick()},0)});c.$container.on("focusin focusout",
XF.proxy(this,"inputFocusBlur"));g.on("change",XF.proxy(this,"updateInput"));g.closest("form").on("reset",function(){g.val(null).trigger("change")})},prepareAjax:function(a){return{q:a.term}},getAjax:function(a,b,c){return XF.ajax("get",this.options.acUrl,a.data,b)},processAjax:function(a,b){return"object"!=typeof a?{}:a},sortResults:function(a){if(1>=a.length)return a;a.hasOwnProperty(0)&&(a[0].hasOwnProperty("q")||a.push(a.shift()));return a},prepareResults:function(a){a.styledText=a.text;if(a.q){var b=
new RegExp("("+XF.regexQuote(a.q)+")","i");a.styledText=XF.htmlspecialchars(a.styledText).replace(b,"<strong>$1</strong>")}else a.disabled||(a.styledText="<strong>"+XF.htmlspecialchars(a.styledText)+"</strong>");b=a.styledText;a.iconHtml&&(b=a.iconHtml+"&nbsp;"+b);return b},prepareSelection:function(a){return XF.htmlspecialchars(a.text)},inputFocusBlur:function(a){switch(a.type){case "focusout":this.$selection.removeClass("is-focused");break;default:this.$selection.addClass("is-focused")}},updateInput:function(a){a=
b(a.target);var c=this.$hiddenInput;a.val()?c.val(a.val().join(", ")):c.val("")}});XF.TokenInput.Phrases={errorLoading:function(){return XF.phrase("s2_error_loading")},inputTooLong:function(a){return XF.phrase("s2_input_too_long",{"{count}":a.input.length-a.maximum})},inputTooShort:function(a){return XF.phrase("s2_input_too_short",{"{count}":a.minimum-a.input.length})},loadingMore:function(){return XF.phrase("s2_loading_more")},maximumSelected:function(a){return XF.phrase("s2_maximum_selected",{"{count}":a.maximum})},
noResults:function(){return XF.phrase("s2_no_results")},searching:function(){return XF.phrase("s2_searching")}};XF.Element.register("token-input","XF.TokenInput")}(jQuery,window,document);
